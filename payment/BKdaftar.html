<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DAFTAR BKCASH</title>
  <link rel="stylesheet" href="bkdaflog.css">
</head>
<body>
  <div class="headbk">
    <a href="bklogin.html"><img src="../payment/aset/arrow-small-left.png" alt="kembali"></a>
    <h1>DAFTAR BKCASH</h1>
  </div>
  <br>
  <fieldset>
    <form id="formDaftar" class="bkdaftar">
      <br>
      <label for="nama">Masukan nama</label><br>
      <input type="text" id="nama" name="nama" minlength="8" maxlength="16" required>
      <br><br>

      <label for="nohp">Masukan no handphone</label><br>
      <input type="tel" name="nohp" id="nohp" pattern="08[0-9]{8,11}" minlength="10" maxlength="13" required>
      <br><br>

      <label for="pin">Masukan PIN</label><br>
      <input type="password" id="pin" name="pin" maxlength="6" required>
      <br><br>

      <button type="submit">DAFTAR</button>
    </form>
  </fieldset>

  <script>
    document.getElementById("formDaftar").addEventListener("submit", function(e) {
      e.preventDefault();

      const nama = document.getElementById("nama").value.trim();
      const nohp = document.getElementById("nohp").value.trim();
      const pin = document.getElementById("pin").value.trim();

      if (!nama || !nohp || !pin) {
        alert("Semua kolom harus diisi!");
        return;
      }

      const pengguna = {
        nama,
        nohp,
        pin
      };

      // Ambil data yang sudah ada
      const daftarPengguna = JSON.parse(localStorage.getItem("bkcashUsers")) || [];

      // Cek duplikat berdasarkan no hp
      const sudahAda = daftarPengguna.some(u => u.nohp === nohp);
      if (sudahAda) {
        alert("Nomor HP sudah terdaftar!");
        return;
      }

      // Simpan data
      daftarPengguna.push(pengguna);
      localStorage.setItem("bkcashUsers", JSON.stringify(daftarPengguna));

      alert("Pendaftaran berhasil!");
      window.location.href = "bklogin.html"; // Arahkan ke halaman login
    });
  </script>
</body>
</html>
